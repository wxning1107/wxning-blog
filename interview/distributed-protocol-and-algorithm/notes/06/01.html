<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gossip 三板斧 | 王雄宁</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/wxning-blog/images/logo.jpg">
    <meta name="description" content="终生学习者">
    
    <link rel="preload" href="/wxning-blog/assets/css/0.styles.164dedc7.css" as="style"><link rel="preload" href="/wxning-blog/assets/js/app.cbde69c9.js" as="script"><link rel="preload" href="/wxning-blog/assets/js/2.f1ac96e4.js" as="script"><link rel="preload" href="/wxning-blog/assets/js/5.9e1c7641.js" as="script"><link rel="preload" href="/wxning-blog/assets/js/49.8fa6e8f4.js" as="script"><link rel="prefetch" href="/wxning-blog/assets/js/10.2f1ae4bc.js"><link rel="prefetch" href="/wxning-blog/assets/js/100.0ecd82ad.js"><link rel="prefetch" href="/wxning-blog/assets/js/101.1e847649.js"><link rel="prefetch" href="/wxning-blog/assets/js/102.d79151b9.js"><link rel="prefetch" href="/wxning-blog/assets/js/103.f5063aa4.js"><link rel="prefetch" href="/wxning-blog/assets/js/104.036477a8.js"><link rel="prefetch" href="/wxning-blog/assets/js/105.2a5adff4.js"><link rel="prefetch" href="/wxning-blog/assets/js/106.fbf011a0.js"><link rel="prefetch" href="/wxning-blog/assets/js/107.a76c3993.js"><link rel="prefetch" href="/wxning-blog/assets/js/108.7d378a93.js"><link rel="prefetch" href="/wxning-blog/assets/js/109.2a247962.js"><link rel="prefetch" href="/wxning-blog/assets/js/11.3b47aedc.js"><link rel="prefetch" href="/wxning-blog/assets/js/110.76643e42.js"><link rel="prefetch" href="/wxning-blog/assets/js/111.43bf0fe6.js"><link rel="prefetch" href="/wxning-blog/assets/js/112.a68467a0.js"><link rel="prefetch" href="/wxning-blog/assets/js/113.a0854f0f.js"><link rel="prefetch" href="/wxning-blog/assets/js/114.0b0798dc.js"><link rel="prefetch" href="/wxning-blog/assets/js/115.446b4c85.js"><link rel="prefetch" href="/wxning-blog/assets/js/116.8d6131f7.js"><link rel="prefetch" href="/wxning-blog/assets/js/117.fab4c915.js"><link rel="prefetch" href="/wxning-blog/assets/js/118.ccb98c61.js"><link rel="prefetch" href="/wxning-blog/assets/js/119.fbae531f.js"><link rel="prefetch" href="/wxning-blog/assets/js/12.ca014793.js"><link rel="prefetch" href="/wxning-blog/assets/js/120.2b97155b.js"><link rel="prefetch" href="/wxning-blog/assets/js/121.2f6c7a06.js"><link rel="prefetch" href="/wxning-blog/assets/js/122.b443b4f4.js"><link rel="prefetch" href="/wxning-blog/assets/js/123.f79e0cdf.js"><link rel="prefetch" href="/wxning-blog/assets/js/124.a99f06d4.js"><link rel="prefetch" href="/wxning-blog/assets/js/125.b994679f.js"><link rel="prefetch" href="/wxning-blog/assets/js/126.360ca09e.js"><link rel="prefetch" href="/wxning-blog/assets/js/127.edaf9254.js"><link rel="prefetch" href="/wxning-blog/assets/js/128.518cb59e.js"><link rel="prefetch" href="/wxning-blog/assets/js/129.9290438e.js"><link rel="prefetch" href="/wxning-blog/assets/js/13.a992038b.js"><link rel="prefetch" href="/wxning-blog/assets/js/130.40379107.js"><link rel="prefetch" href="/wxning-blog/assets/js/131.5061e559.js"><link rel="prefetch" href="/wxning-blog/assets/js/132.5f4b3453.js"><link rel="prefetch" href="/wxning-blog/assets/js/133.7ff47cae.js"><link rel="prefetch" href="/wxning-blog/assets/js/134.6739f01f.js"><link rel="prefetch" href="/wxning-blog/assets/js/135.57bf46e2.js"><link rel="prefetch" href="/wxning-blog/assets/js/136.9115bda2.js"><link rel="prefetch" href="/wxning-blog/assets/js/137.8534ba4d.js"><link rel="prefetch" href="/wxning-blog/assets/js/138.b7d1211d.js"><link rel="prefetch" href="/wxning-blog/assets/js/139.3a121541.js"><link rel="prefetch" href="/wxning-blog/assets/js/14.8c6a3693.js"><link rel="prefetch" href="/wxning-blog/assets/js/140.8cd24da5.js"><link rel="prefetch" href="/wxning-blog/assets/js/141.2c5a7f8c.js"><link rel="prefetch" href="/wxning-blog/assets/js/142.9c863c32.js"><link rel="prefetch" href="/wxning-blog/assets/js/143.34bf1430.js"><link rel="prefetch" href="/wxning-blog/assets/js/144.9f85522f.js"><link rel="prefetch" href="/wxning-blog/assets/js/145.f6902004.js"><link rel="prefetch" href="/wxning-blog/assets/js/146.a8ee000a.js"><link rel="prefetch" href="/wxning-blog/assets/js/147.a247c664.js"><link rel="prefetch" href="/wxning-blog/assets/js/148.204ba2d2.js"><link rel="prefetch" href="/wxning-blog/assets/js/149.8d69bf71.js"><link rel="prefetch" href="/wxning-blog/assets/js/15.7bc41c20.js"><link rel="prefetch" href="/wxning-blog/assets/js/150.ac6e3608.js"><link rel="prefetch" href="/wxning-blog/assets/js/151.6ea02386.js"><link rel="prefetch" href="/wxning-blog/assets/js/152.0222a4d1.js"><link rel="prefetch" href="/wxning-blog/assets/js/153.4a547bc0.js"><link rel="prefetch" href="/wxning-blog/assets/js/154.78d0e68d.js"><link rel="prefetch" href="/wxning-blog/assets/js/155.ee7b7059.js"><link rel="prefetch" href="/wxning-blog/assets/js/156.8c46eb64.js"><link rel="prefetch" href="/wxning-blog/assets/js/157.5dadbdb3.js"><link rel="prefetch" href="/wxning-blog/assets/js/158.9f812bdc.js"><link rel="prefetch" href="/wxning-blog/assets/js/159.78a797a9.js"><link rel="prefetch" href="/wxning-blog/assets/js/16.ab82db21.js"><link rel="prefetch" href="/wxning-blog/assets/js/160.bb008be3.js"><link rel="prefetch" href="/wxning-blog/assets/js/161.b7d7acd8.js"><link rel="prefetch" href="/wxning-blog/assets/js/162.a7efa2a7.js"><link rel="prefetch" href="/wxning-blog/assets/js/163.d6ad0171.js"><link rel="prefetch" href="/wxning-blog/assets/js/164.a65a0d33.js"><link rel="prefetch" href="/wxning-blog/assets/js/165.4b6645b6.js"><link rel="prefetch" href="/wxning-blog/assets/js/166.aa23407b.js"><link rel="prefetch" href="/wxning-blog/assets/js/167.be735057.js"><link rel="prefetch" href="/wxning-blog/assets/js/168.add92845.js"><link rel="prefetch" href="/wxning-blog/assets/js/169.df5dbc79.js"><link rel="prefetch" href="/wxning-blog/assets/js/17.bd0e5d68.js"><link rel="prefetch" href="/wxning-blog/assets/js/170.46c8a81f.js"><link rel="prefetch" href="/wxning-blog/assets/js/171.04a1a85a.js"><link rel="prefetch" href="/wxning-blog/assets/js/172.94a1b4ce.js"><link rel="prefetch" href="/wxning-blog/assets/js/173.fcf91ebf.js"><link rel="prefetch" href="/wxning-blog/assets/js/174.e68abcd2.js"><link rel="prefetch" href="/wxning-blog/assets/js/175.75dd5bec.js"><link rel="prefetch" href="/wxning-blog/assets/js/176.bc3fbfc3.js"><link rel="prefetch" href="/wxning-blog/assets/js/177.0282de9f.js"><link rel="prefetch" href="/wxning-blog/assets/js/178.3add2dd5.js"><link rel="prefetch" href="/wxning-blog/assets/js/179.41e246ec.js"><link rel="prefetch" href="/wxning-blog/assets/js/18.cfaeda87.js"><link rel="prefetch" href="/wxning-blog/assets/js/180.e1bf2123.js"><link rel="prefetch" href="/wxning-blog/assets/js/181.a4c89800.js"><link rel="prefetch" href="/wxning-blog/assets/js/182.29252984.js"><link rel="prefetch" href="/wxning-blog/assets/js/183.22a5d618.js"><link rel="prefetch" href="/wxning-blog/assets/js/184.e0c69e76.js"><link rel="prefetch" href="/wxning-blog/assets/js/185.296d1ad1.js"><link rel="prefetch" href="/wxning-blog/assets/js/186.09dfa50e.js"><link rel="prefetch" href="/wxning-blog/assets/js/187.7f8df5a9.js"><link rel="prefetch" href="/wxning-blog/assets/js/188.656f6f08.js"><link rel="prefetch" href="/wxning-blog/assets/js/189.a86d522c.js"><link rel="prefetch" href="/wxning-blog/assets/js/19.1c537ac5.js"><link rel="prefetch" href="/wxning-blog/assets/js/190.e0cd20ab.js"><link rel="prefetch" href="/wxning-blog/assets/js/191.71d14a4b.js"><link rel="prefetch" href="/wxning-blog/assets/js/192.9c333a8a.js"><link rel="prefetch" href="/wxning-blog/assets/js/193.f4542147.js"><link rel="prefetch" href="/wxning-blog/assets/js/194.32474321.js"><link rel="prefetch" href="/wxning-blog/assets/js/195.4d4d540b.js"><link rel="prefetch" href="/wxning-blog/assets/js/196.e003a31b.js"><link rel="prefetch" href="/wxning-blog/assets/js/197.859e8e32.js"><link rel="prefetch" href="/wxning-blog/assets/js/198.ba56b009.js"><link rel="prefetch" href="/wxning-blog/assets/js/199.7a57a07e.js"><link rel="prefetch" href="/wxning-blog/assets/js/20.4aad33c5.js"><link rel="prefetch" href="/wxning-blog/assets/js/200.2e1b2368.js"><link rel="prefetch" href="/wxning-blog/assets/js/201.27c98992.js"><link rel="prefetch" href="/wxning-blog/assets/js/202.566e3b74.js"><link rel="prefetch" href="/wxning-blog/assets/js/203.73867ddd.js"><link rel="prefetch" href="/wxning-blog/assets/js/204.c2304880.js"><link rel="prefetch" href="/wxning-blog/assets/js/205.7ada01fe.js"><link rel="prefetch" href="/wxning-blog/assets/js/206.93aab607.js"><link rel="prefetch" href="/wxning-blog/assets/js/207.2ee6c7b5.js"><link rel="prefetch" href="/wxning-blog/assets/js/208.17ae6635.js"><link rel="prefetch" href="/wxning-blog/assets/js/209.2975931f.js"><link rel="prefetch" href="/wxning-blog/assets/js/21.4cb2a381.js"><link rel="prefetch" href="/wxning-blog/assets/js/210.9065a4e0.js"><link rel="prefetch" href="/wxning-blog/assets/js/211.d9cae731.js"><link rel="prefetch" href="/wxning-blog/assets/js/212.d644720c.js"><link rel="prefetch" href="/wxning-blog/assets/js/213.be8a850b.js"><link rel="prefetch" href="/wxning-blog/assets/js/214.646227d9.js"><link rel="prefetch" href="/wxning-blog/assets/js/215.279eccbd.js"><link rel="prefetch" href="/wxning-blog/assets/js/216.51e9ded3.js"><link rel="prefetch" href="/wxning-blog/assets/js/217.564ef5df.js"><link rel="prefetch" href="/wxning-blog/assets/js/218.81709c54.js"><link rel="prefetch" href="/wxning-blog/assets/js/22.63c72c44.js"><link rel="prefetch" href="/wxning-blog/assets/js/23.063cdf0b.js"><link rel="prefetch" href="/wxning-blog/assets/js/24.c363aa75.js"><link rel="prefetch" href="/wxning-blog/assets/js/25.552c843c.js"><link rel="prefetch" href="/wxning-blog/assets/js/26.b1c2fa39.js"><link rel="prefetch" href="/wxning-blog/assets/js/27.31095a14.js"><link rel="prefetch" href="/wxning-blog/assets/js/28.de61e881.js"><link rel="prefetch" href="/wxning-blog/assets/js/29.c962a093.js"><link rel="prefetch" href="/wxning-blog/assets/js/3.3a88c02f.js"><link rel="prefetch" href="/wxning-blog/assets/js/30.25129bd2.js"><link rel="prefetch" href="/wxning-blog/assets/js/31.bbe3b0da.js"><link rel="prefetch" href="/wxning-blog/assets/js/32.43564c47.js"><link rel="prefetch" href="/wxning-blog/assets/js/33.f480bca4.js"><link rel="prefetch" href="/wxning-blog/assets/js/34.c0336529.js"><link rel="prefetch" href="/wxning-blog/assets/js/35.c52c049e.js"><link rel="prefetch" href="/wxning-blog/assets/js/36.269d33dd.js"><link rel="prefetch" href="/wxning-blog/assets/js/37.8ed6544d.js"><link rel="prefetch" href="/wxning-blog/assets/js/38.41e9a51d.js"><link rel="prefetch" href="/wxning-blog/assets/js/39.4291253d.js"><link rel="prefetch" href="/wxning-blog/assets/js/4.1816be02.js"><link rel="prefetch" href="/wxning-blog/assets/js/40.e6679217.js"><link rel="prefetch" href="/wxning-blog/assets/js/41.f1214829.js"><link rel="prefetch" href="/wxning-blog/assets/js/42.afc0e83d.js"><link rel="prefetch" href="/wxning-blog/assets/js/43.e492e54a.js"><link rel="prefetch" href="/wxning-blog/assets/js/44.46276018.js"><link rel="prefetch" href="/wxning-blog/assets/js/45.c4f582f7.js"><link rel="prefetch" href="/wxning-blog/assets/js/46.12912f70.js"><link rel="prefetch" href="/wxning-blog/assets/js/47.0d5e6c01.js"><link rel="prefetch" href="/wxning-blog/assets/js/48.06fa7c3e.js"><link rel="prefetch" href="/wxning-blog/assets/js/50.2d35e5d1.js"><link rel="prefetch" href="/wxning-blog/assets/js/51.e8ade5c0.js"><link rel="prefetch" href="/wxning-blog/assets/js/52.33ea99ec.js"><link rel="prefetch" href="/wxning-blog/assets/js/53.b555efe2.js"><link rel="prefetch" href="/wxning-blog/assets/js/54.e4162b33.js"><link rel="prefetch" href="/wxning-blog/assets/js/55.f991e038.js"><link rel="prefetch" href="/wxning-blog/assets/js/56.d3987f26.js"><link rel="prefetch" href="/wxning-blog/assets/js/57.b988ebb1.js"><link rel="prefetch" href="/wxning-blog/assets/js/58.0428e4fb.js"><link rel="prefetch" href="/wxning-blog/assets/js/59.7df46606.js"><link rel="prefetch" href="/wxning-blog/assets/js/6.054bb154.js"><link rel="prefetch" href="/wxning-blog/assets/js/60.738f50ac.js"><link rel="prefetch" href="/wxning-blog/assets/js/61.bf9df98c.js"><link rel="prefetch" href="/wxning-blog/assets/js/62.faf3d5f0.js"><link rel="prefetch" href="/wxning-blog/assets/js/63.5dcbceb7.js"><link rel="prefetch" href="/wxning-blog/assets/js/64.586ab2e4.js"><link rel="prefetch" href="/wxning-blog/assets/js/65.1e43da4b.js"><link rel="prefetch" href="/wxning-blog/assets/js/66.f1c266a7.js"><link rel="prefetch" href="/wxning-blog/assets/js/67.d3952329.js"><link rel="prefetch" href="/wxning-blog/assets/js/68.26ea1183.js"><link rel="prefetch" href="/wxning-blog/assets/js/69.101ed1f9.js"><link rel="prefetch" href="/wxning-blog/assets/js/7.6a759c8f.js"><link rel="prefetch" href="/wxning-blog/assets/js/70.fcd63d81.js"><link rel="prefetch" href="/wxning-blog/assets/js/71.5d60cc91.js"><link rel="prefetch" href="/wxning-blog/assets/js/72.aa260aa0.js"><link rel="prefetch" href="/wxning-blog/assets/js/73.9586c723.js"><link rel="prefetch" href="/wxning-blog/assets/js/74.036766df.js"><link rel="prefetch" href="/wxning-blog/assets/js/75.0c4209fe.js"><link rel="prefetch" href="/wxning-blog/assets/js/76.e86f3318.js"><link rel="prefetch" href="/wxning-blog/assets/js/77.cc754433.js"><link rel="prefetch" href="/wxning-blog/assets/js/78.328a4d45.js"><link rel="prefetch" href="/wxning-blog/assets/js/79.900efb45.js"><link rel="prefetch" href="/wxning-blog/assets/js/8.3a1cc8ee.js"><link rel="prefetch" href="/wxning-blog/assets/js/80.4c7cbde2.js"><link rel="prefetch" href="/wxning-blog/assets/js/81.43e52284.js"><link rel="prefetch" href="/wxning-blog/assets/js/82.cf6169df.js"><link rel="prefetch" href="/wxning-blog/assets/js/83.61a71b85.js"><link rel="prefetch" href="/wxning-blog/assets/js/84.294d325d.js"><link rel="prefetch" href="/wxning-blog/assets/js/85.ce5396ce.js"><link rel="prefetch" href="/wxning-blog/assets/js/86.52fd33e3.js"><link rel="prefetch" href="/wxning-blog/assets/js/87.13a7bc1a.js"><link rel="prefetch" href="/wxning-blog/assets/js/88.0fa59ef1.js"><link rel="prefetch" href="/wxning-blog/assets/js/89.4fbbf309.js"><link rel="prefetch" href="/wxning-blog/assets/js/9.0a80b669.js"><link rel="prefetch" href="/wxning-blog/assets/js/90.73280631.js"><link rel="prefetch" href="/wxning-blog/assets/js/91.b08c2c62.js"><link rel="prefetch" href="/wxning-blog/assets/js/92.33dd37db.js"><link rel="prefetch" href="/wxning-blog/assets/js/93.a416c146.js"><link rel="prefetch" href="/wxning-blog/assets/js/94.87043e4a.js"><link rel="prefetch" href="/wxning-blog/assets/js/95.c9d88e83.js"><link rel="prefetch" href="/wxning-blog/assets/js/96.d2a4fdfb.js"><link rel="prefetch" href="/wxning-blog/assets/js/97.7845b034.js"><link rel="prefetch" href="/wxning-blog/assets/js/98.e34bf062.js"><link rel="prefetch" href="/wxning-blog/assets/js/99.a3c8ca63.js">
    <link rel="stylesheet" href="/wxning-blog/assets/css/0.styles.164dedc7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wxning-blog/" class="home-link router-link-active"><!----> <span class="site-name">王雄宁</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wxning-blog/guide/" class="nav-link">
  个人简介
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="交易系统" class="dropdown-title"><span class="title">交易系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="交易系统" class="mobile-dropdown-title"><span class="title">交易系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wxning-blog/transaction/diary/" class="nav-link">
  交易日记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础教程" class="dropdown-title"><span class="title">基础教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础教程" class="mobile-dropdown-title"><span class="title">基础教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wxning-blog/base/typescript/" class="nav-link">
  TypeScript简明教程
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wxning-blog/base/grpc/" class="nav-link">
  GRPC
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试宝典" class="dropdown-title"><span class="title">面试宝典</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试宝典" class="mobile-dropdown-title"><span class="title">面试宝典</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wxning-blog/interview/system-design/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/wxning-blog/interview/data-structure-and-algorithm/" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/wxning-blog/interview/distributed-protocol-and-algorithm/" class="nav-link router-link-active">
  分布式协议与算法
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wxning1107" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wxning-blog/guide/" class="nav-link">
  个人简介
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="交易系统" class="dropdown-title"><span class="title">交易系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="交易系统" class="mobile-dropdown-title"><span class="title">交易系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wxning-blog/transaction/diary/" class="nav-link">
  交易日记
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础教程" class="dropdown-title"><span class="title">基础教程</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础教程" class="mobile-dropdown-title"><span class="title">基础教程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          前端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wxning-blog/base/typescript/" class="nav-link">
  TypeScript简明教程
</a></li></ul></li><li class="dropdown-item"><h4>
          后端
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wxning-blog/base/grpc/" class="nav-link">
  GRPC
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试宝典" class="dropdown-title"><span class="title">面试宝典</span> <span class="arrow down"></span></button> <button type="button" aria-label="面试宝典" class="mobile-dropdown-title"><span class="title">面试宝典</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wxning-blog/interview/system-design/" class="nav-link">
  系统设计
</a></li><li class="dropdown-item"><!----> <a href="/wxning-blog/interview/data-structure-and-algorithm/" class="nav-link">
  数据结构与算法
</a></li><li class="dropdown-item"><!----> <a href="/wxning-blog/interview/distributed-protocol-and-algorithm/" class="nav-link router-link-active">
  分布式协议与算法
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/wxning1107" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CAP理论</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/00/01.html" class="sidebar-link">CAP三指标</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/00/02.html" class="sidebar-link">CAP不可能三角</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/00/03.html" class="sidebar-link">如何使用CAP理论</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ACID理论</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/01/01.html" class="sidebar-link">两阶段提交</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/01/02.html" class="sidebar-link">TCC协议(Try-Confirm-Cancel)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>BASE理论</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/02/01.html" class="sidebar-link">实现基本可用的4板斧</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/02/02.html" class="sidebar-link">最终的一致</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/02/03.html" class="sidebar-link">如何使用BASE理论</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Paxos算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/03/01.html" class="sidebar-link">三种角色</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/03/02.html" class="sidebar-link">Basic Paxos</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/03/03.html" class="sidebar-link">Multi-Paxos</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Raft算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/04/01.html" class="sidebar-link">成员身份</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/04/02.html" class="sidebar-link">选举领导者</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/04/03.html" class="sidebar-link">如何复制日志?</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/04/04.html" class="sidebar-link">成员变更的问题</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/04/05.html" class="sidebar-link">通过单节点变更解决成员变更问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>一致性哈希算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/05/01.html" class="sidebar-link">使用哈希算法有什么问题?</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/05/02.html" class="sidebar-link">如何使用一致哈希实现哈希寻址?</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/05/03.html" class="sidebar-link">使用虚拟节点解决分布不均问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Gossip协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/06/01.html" aria-current="page" class="active sidebar-link">Gossip 三板斧</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/06/02.html" class="sidebar-link">如何使用 Anti-entropy 实现最终一致</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Quorum NWR算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/07/01.html" class="sidebar-link">Quorum NWR 的三要素</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/07/02.html" class="sidebar-link">如何实现 Quorum NWR?</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ZAB协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/08/01.html" class="sidebar-link">为什么 Multi-Paxos 无法实现操作顺序性?</a></li><li><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/08/02.html" class="sidebar-link">ZAB 是如何保证操作的顺序性的?</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gossip-三板斧"><a href="#gossip-三板斧" class="header-anchor">#</a> Gossip 三板斧</h1> <p>有一部分同学的业务在可用性上比较敏感，比如监控主机和业务运行的告警系统。这个时 候，相信你希望自己的系统能在极端情况下(比如集群中只有一个节点在运行)也能运行。 回忆了二阶段提交协议和 Raft 算法之后，你发现它们都需要全部节点或者大多数节点正常运行，才能稳定运行，那么它们就不适合了。而根据 Base 理论，你需要实现最终一致性， 怎么样才能实现最终一致性呢?</p> <p>在我看来，你可以通过 Gossip 协议实现这个目标。</p> <p>Gossip 协议，顾名思义，就像流言蜚语一样，利用一种随机、带有传染性的方式，将信息 传播到整个网络中，并在一定时间内，使得系统内的所有节点数据一致。</p> <p>Gossip 的三板斧分别是:直接邮寄(Direct Mail)、反熵(Anti-entropy)和谣言传播 (Rumor mongering)。</p> <p>直接邮寄:就是直接发送更新数据，当数据发送失败时，将数据缓存下来，然后重传。从图中你可以看到，节点 A 直接将更新数据发送给了节点 B、D。</p> <p><img src="/wxning-blog/assets/img/image-20211114112526048.0a2ade6c.png" alt="img"></p> <p>在这里我想补充一点，直接邮寄虽然实现起来比较容易，数据同步也很及时，但可能会因为缓存队列满了而丢数据。也就是说，只采用直接邮寄是无法实现最终一致性的。</p> <p>那如何实现最终一致性呢?答案就是反熵。本质上，反熵是一种通过异步修复（BASE理论时有讲过）实现最终一致 性的方法。常见的最终一致性系统(比如 Cassandra)，都实现了反熵功能。</p> <p>反熵指的是集群中的节点，每隔段时间就随机选择某个其他节点，然后通过互相交换自己的所有数据来消除两者之间的差异，实现数据的最终一致性:</p> <p><img src="/wxning-blog/assets/img/image-20211114112739720.b47a44c2.png" alt="img"></p> <p>从图中你可以看到，节点 A 通过反熵的方式，修复了节点 D 中缺失的数据。那具体怎么实现的呢?</p> <p>**其实，在实现反熵的时候，主要有推、拉和推拉三种方式。**我将以修复下图中，2 个数据副 本的不一致为例，具体带你了解一下。</p> <p><img src="/wxning-blog/assets/img/image-20211114112816080.0a400c63.png" alt="img"></p> <p>推方式，就是将自己的所有副本数据，推给对方，修复对方副本中的熵:</p> <p><img src="/wxning-blog/assets/img/image-20211114112835525.f1ceb04d.png" alt="img"></p> <p>拉方式，就是拉取对方的所有副本数据，修复自己副本中的熵:</p> <p><img src="/wxning-blog/assets/img/image-20211114112852916.9d1af923.png" alt="img"></p> <p>理解了推和拉之后，推拉这个方式就很好理解了，这个方式就是同时修复自己副本和对方副本中的熵:</p> <p><img src="/wxning-blog/assets/img/image-20211114112914007.3d6e5543.png" alt="img"></p> <p>也许有很多同学会觉得反熵是一个很奇怪的名词。其实，你可以这么来理解，反熵中的熵是指混乱程度，反熵就是指消除不同节点中数据的差异，提升节点间数据的相似度，降低熵值。</p> <p>另外需要你注意的是，因为反熵需要节点两两交换和比对自己所有的数据，执行反熵时通讯 成本会很高，所以我不建议你在实际场景中频繁执行反熵，并且可以通过引入校验和 (Checksum)等机制，降低需要对比的数据量和通讯消息等。</p> <p>虽然反熵很实用，但是执行反熵时，相关的节点都是已知的，而且节点数量不能太多，如果 是一个动态变化或节点数比较多的分布式环境(比如在 DevOps 环境中检测节点故障，并 动态维护集群节点状态)，这时反熵就不适用了。<strong>那么当你面临这个情况要怎样实现最终一 致性呢?答案就是谣言传播。</strong></p> <p>谣言传播，广泛地散播谣言，它指的是当一个节点有了新数据后，这个节点变成活跃状态，并周期性地联系其他节点向其发送新数据，直到所有的节点都存储了该新数据:</p> <p><img src="/wxning-blog/assets/img/image-20211114113123951.b93f9b4c.png" alt="img"></p> <p>从图中你可以看到，节点 A 向节点 B、D 发送新数据，节点 B 收到新数据后，变成活跃节 点，然后节点 B 向节点 C、D 发送新数据。其实，谣言传播非常具有传染性，它适合动态 变化的分布式系统。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/05/03.html" class="prev">
        使用虚拟节点解决分布不均问题
      </a></span> <span class="next"><a href="/wxning-blog/interview/distributed-protocol-and-algorithm/notes/06/02.html">
        如何使用 Anti-entropy 实现最终一致
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/wxning-blog/assets/js/app.cbde69c9.js" defer></script><script src="/wxning-blog/assets/js/2.f1ac96e4.js" defer></script><script src="/wxning-blog/assets/js/5.9e1c7641.js" defer></script><script src="/wxning-blog/assets/js/49.8fa6e8f4.js" defer></script>
  </body>
</html>
