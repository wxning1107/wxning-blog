# TCP 的 keepalive 了解吗？说一说它和 HTTP 的 keepalive 的区别？

TCP的KeepAlive意图在于保活、心跳，检测连接错误。当一个TCP连接两端长时间没有数据传输时(通常默认配置是2小时)，发送keepalive心跳包，探测连接是否存活。如果间隔发送几次，对方都返回的是RST，而不是ACK，那么就认为连接已经丢失，就释放当前连接。设想一下，如果tcp层没有keepalive的机制，一旦一方断开连接却没有发送FIN给另外一方的话，那么另外一方会一直以为这个连接还是存活的，几天，几月。那么这对服务器资源的影响是很大的。(在ESTABLISH状态的时候，双方为了检测连接的可用行。)

HTTP协议的Keep-Alive意图在于短时间内连接复用，希望可以短时间内在同一个连接上进行多次请求/响应。
