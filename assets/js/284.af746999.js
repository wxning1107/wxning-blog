(window.webpackJsonp=window.webpackJsonp||[]).push([[284],{1051:function(_,v,t){"use strict";t.r(v);var p=t(15),r=Object(p.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"数据库反范式设计会出现什么问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据库反范式设计会出现什么问题"}},[_._v("#")]),_._v(" 数据库反范式设计会出现什么问题？")]),_._v(" "),t("p",[t("strong",[_._v("数据库的三大范式：")])]),_._v(" "),t("p",[_._v("第一范式：列不可分。比如邮寄地址格式是：xxx省，xxx市，xxx区，xxx路，这些省市区要单独设成一列。")]),_._v(" "),t("p",[_._v("第二范式：要有主键（行唯一标志，不存在部分依赖）。简单来说就是拆表，以学生为粒度做一张明细表，以课程号为粒度做一张维度表，两表关联使用，消除了数据冗余。")]),_._v(" "),t("p",[_._v("第三范式：不可存在传递依赖。比如商品表里面关联商品类别表，那么只需要一个关联字段product_type_id即可，其他字段信息可以通过表关联查询即可得到如果商品表还存在一个商品类别名称字段，如product_type_name，那就属于存在传递依赖的情况，第三范式主要是从空间的角度来考虑，避免产生冗余信息，浪费磁盘空间")]),_._v(" "),t("p",[t("strong",[_._v("反范式设计：(第三范式)")])]),_._v(" "),t("p",[_._v("为什么会有反范式设计？")]),_._v(" "),t("p",[_._v("原因一：提高查询效率（读多写少）")]),_._v(" "),t("p",[_._v("比如上述的描述中，显示商品信息时，经常需要伴随商品类别信息的展示，所以这个时候，为了提高查询效率，可以通过冗余一个商品名称字段，这个可以将原先的表关联查询转换为单表查询")]),_._v(" "),t("p",[_._v("原因二：保存历史快照信息")]),_._v(" "),t("p",[_._v("比如订单表，里面需要包含收货人的各项信息，如姓名，电话，地址等等，这些都属于历史快照，需要冗余保存起来，不能通过保存用户地址ID去关联查询，因为用户的收货人信息可能会在后期发生变更")]),_._v(" "),t("p",[t("strong",[_._v("数据库中的数据反范式某种意义上来说就是一种以空间换时间的手段。")])]),_._v(" "),t("p",[t("strong",[_._v("范式与反范式的比较：")])]),_._v(" "),t("p",[_._v("1.查询记录时，范式模式往往要进行多表连接，而反范式只需在同一张表中查询，当数据量很大的时候，显然反范式的效率会更好。")]),_._v(" "),t("p",[_._v("2.反范式有很多重复的数据，会占用更多的内存，查询时可能会较多地使用GROUP BY或DISTINCT等耗时耗性能的关键字。")]),_._v(" "),t("p",[_._v("3.当要修改更新数据时，范式更灵活，而反范式要修改全部的数据，且易出错。")]),_._v(" "),t("p",[t("strong",[_._v("常见的反规范化技术包括：")])]),_._v(" "),t("p",[_._v("1.增加冗余列")]),_._v(" "),t("p",[_._v("增加冗余列是指在多个表中具有相同的列，它常用来在查询时避免连接操作。例如：以规范化设计的理念，学生成绩表中不需要字段“姓名”，因为“姓名”字段可以通过学号查询到，但在反规范化设计中，会将“姓名”字段加入表中。这样查询一个学生的成绩时，不需要与学生表进行连接操作，便可得到对应的“姓名”。")]),_._v(" "),t("p",[_._v("2.增加派生列")]),_._v(" "),t("p",[_._v("增加派生列指增加的列可以通过表中其他数据计算生成。它的作用是在查询时减少计算量，从而加快查询速度。例如：订单表中，有商品号、商品单价、采购数量，我们需要订单总价时，可以通过计算得到总价，所以规范化设计的理念是无须在订单表中设计“订单总价”字段。但反规范化则不这样考虑，由于订单总价在每次查询都需要计算，这样会占用系统大量资源，所以在此表中增加派生列“订单总价”以提高查询效率。")]),_._v(" "),t("p",[_._v("3.重新组表")]),_._v(" "),t("p",[_._v("重新组表指如果许多用户需要查看两个表连接出来的结果数据，则把这两个表重新组成一个表来减少连接而提高性能。")]),_._v(" "),t("p",[_._v("4.分割表")]),_._v(" "),t("p",[_._v("水平分割和垂直分割")])])}),[],!1,null,null,null);v.default=r.exports}}]);