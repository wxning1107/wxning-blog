(window.webpackJsonp=window.webpackJsonp||[]).push([[225],{909:function(v,_,t){"use strict";t.r(_);var s=t(15),n=Object(s.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"实现基本可用的4板斧"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实现基本可用的4板斧"}},[v._v("#")]),v._v(" 实现基本可用的4板斧")]),v._v(" "),t("p",[v._v("在学了 CAP 理论后，你肯定知道在分布式系统中要实现强一致性必然会影响可用性。在我看来，BASE 理论是 CAP 理论中的 AP 的延伸，是对互联网大规模分布式系统的实践 总结，强调可用性。")]),v._v(" "),t("p",[v._v("而它的核心就是基本可用(Basically Available)和最终一致性(Eventually consistent)。")]),v._v(" "),t("p",[v._v("基本可用是说，当分布式系统在出现不可预知的故障时，允许损失部分功能的可用性，保障核心功能的可用性。")]),v._v(" "),t("p",[v._v("具体说的话，你可以把基本可用理解成，当系统节点出现大规模故障的时候，比如专线的光纤被挖断、突发流量")]),v._v(" "),t("p",[v._v("致系统过载(出现了突发事件，服务被大量访问)，这个时候可以通过服务降级，牺牲部分功能的可用性，保障系统的核心功能可用。")]),v._v(" "),t("p",[v._v("就拿 12306 订票系统基本可用的设计为例，这个订票系统在春运期间，因为开始售票后先到先得的缘故，会出现极其海量的请求峰值，如何处理这个问题呢?")]),v._v(" "),t("p",[v._v("咱们可以在不同的时间，出售不同区域的票，将访问请求错开，削弱请求峰值。比如，在春 运期间，深圳出发的火车票在 8 点开售，北京出发的火车票在 9 点开售。"),t("strong",[v._v("这就是我们常说 的流量削峰。")])]),v._v(" "),t("p",[v._v("另外，你可能已经发现了，在春运期间，自己提交的购票请求，往往会在队列中排队等待处 理，可能几分钟或十几分钟后，系统才开始处理，然后响应处理结果，"),t("strong",[v._v("这就是你熟悉的延迟 响应。")]),v._v(" 你看，12306 订票系统在出现超出系统处理能力的突发流量的情况下，会通过牺牲 响应时间的可用性，保障核心功能的运行。")]),v._v(" "),t("p",[v._v("再比如，你正负责一个互联网系统，突然出现了网络热点事件，好多用户涌进来，产生了海量的突发流量，系统过载了，大量图片因为网络超时无法显示。那么这个时候你可以通过哪些方法，保障系统的基本可用呢?")]),v._v(" "),t("p",[t("strong",[v._v("相信你马上就能想到体验降级，")]),v._v(" 比如用小图片来替代原始图片，通过降低图片的清晰度和 大小，提升系统的处理能力。")]),v._v(" "),t("p",[t("strong",[v._v("然后你还能想到过载保护，")]),v._v(" 比如把接收到的请求放在指定的队列中排队处理，如果请求等 待时间超时了(假设是 100ms)，这个时候直接拒绝超时请求;再比如队列满了之后，就 清除队列中一定数量的排队请求，保护系统不过载，实现系统的基本可用。")]),v._v(" "),t("p",[t("strong",[v._v("你看，和 12306 的设计类似，只不过你负责的互联网系统是通过牺牲部分功能的可用性， 保障核心功能的运行。")])]),v._v(" "),t("p",[v._v("我说了这么多，主要是想强调:基本可用在本质上是一种妥协，也就是在出现节点故障或系统过载的时候，通过牺牲非核心功能的可用性，保障核心功能的稳定运行。")]),v._v(" "),t("p",[v._v("我希望你能在后续的分布式系统的开发中，"),t("strong",[v._v("不仅掌握流量削峰、延迟响应、体验降级、过载 保护这 4 板斧")]),v._v("，更能理解这 4 板斧背后的妥协折中，从而灵活地处理不可预知的突发问题。")])])}),[],!1,null,null,null);_.default=n.exports}}]);