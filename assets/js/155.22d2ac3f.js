(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{1403:function(t,e,o){"use strict";o.r(e);var s=o(15),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"dns工作原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dns工作原理"}},[t._v("#")]),t._v(" DNS工作原理")]),t._v(" "),s("p",[t._v("DNS 服务器树状的层次结构：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:o(817),alt:"image-20220328181239678"}}),t._v(" "),s("p",[t._v("为了提高 DNS 的解析性能，很多网络都会就近部署 DNS 缓存服务器。于是，就有了以下的 DNS 解析流程。")]),t._v(" "),s("p",[t._v("1.电脑客户端会发出一个 DNS 请求，问 www.163.com 的 IP 是啥啊，并发给本地域名服务器 (本地 DNS)。那本地域名服务器 (本地 DNS) 是什么呢？如果是通过 DHCP 配置，本地 DNS 由你的网络服务商（ISP），如电信、移动等自动分配，它通常就在你网络服务商的某个机房。")]),t._v(" "),s("p",[t._v("2.本地 DNS 收到来自客户端的请求。你可以想象这台服务器上缓存了一张域名与之对应 IP 地址的大表格。如果能找到 www.163.com，它直接就返回 IP 地址。如果没有，本地 DNS 会去问它的根域名服务器：“老大，能告诉我 www.163.com 的 IP 地址吗？”根域名服务器是最高层次的，全球共有 13 套。它不直接用于域名解析，但能指明一条道路。")]),t._v(" "),s("p",[t._v("3.根 DNS 收到来自本地 DNS 的请求，发现后缀是 .com，说：“哦，www.163.com 啊，这个域名是由.com 区域管理，我给你它的顶级域名服务器的地址，你去问问它吧。”")]),t._v(" "),s("p",[t._v("4.本地 DNS 转向问顶级域名服务器：“老二，你能告诉我 www.163.com 的 IP 地址吗？”顶级域名服务器就是大名鼎鼎的比如 .com、.net、 .org 这些一级域名，它负责管理二级域名，比如 163.com，所以它能提供一条更清晰的方向。")]),t._v(" "),s("p",[t._v("5.顶级域名服务器说：“我给你负责 www.163.com 区域的权威 DNS 服务器的地址，你去问它应该能问到。”")]),t._v(" "),s("p",[t._v("6.本地 DNS 转向问权威 DNS 服务器：“您好，www.163.com 对应的 IP 是啥呀？”163.com 的权威 DNS 服务器，它是域名解析结果的原出处。为啥叫权威呢？就是我的域名我做主。")]),t._v(" "),s("p",[t._v("7.权限 DNS 服务器查询后将对应的 IP 地址 X.X.X.X 告诉本地 DNS。")]),t._v(" "),s("p",[t._v("8.本地 DNS 再将 IP 地址返回客户端，客户端和目标建立连接。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:o(818),alt:"image-20220328181440323"}}),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("可以参考"),s("a",{attrs:{href:"http://polygonx.top/wxning-blog/interview/system-design/notes/03/05.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("王雄宁系统设计课程"),s("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports},817:function(t,e,o){t.exports=o.p+"assets/img/image-20220328181239678.3bd12060.png"},818:function(t,e,o){t.exports=o.p+"assets/img/image-20220328181440323.20952b49.png"}}]);