(window.webpackJsonp=window.webpackJsonp||[]).push([[406],{1425:function(a,n,t){"use strict";t.r(n);var e=t(15),s=Object(e.a)({},(function(){var a=this,n=a.$createElement,t=a._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"如何实现-quorum-nwr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何实现-quorum-nwr"}},[a._v("#")]),a._v(" 如何实现 Quorum NWR?")]),a._v(" "),t("p",[a._v("在 InfluxDB 企业版中，可以在创建保留策略时，设置指定数据库(Database)对应的副本数，具体的命令，就像下面的样子:")]),a._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("create retention policy "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rp_one_day"')]),a._v(" on "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"telegraf"')]),a._v(" duration 1d replication "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("InfluxDB 企业版，支持“any、one、quorum、all”4 种写一致性级别，具体的含义是这样的:")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("any:任何一个节点写入成功后，或者接收节点已将数据写入 Hinted-handoff 缓存(也 就是写其他节点失败后，本地节点上缓存写失败数据的队列)后，就会返回成功给客户 端。")])]),a._v(" "),t("li",[t("p",[a._v("one:任何一个节点写入成功后，立即返回成功给客户端，不包括成功写入到 Hinted- handoff 缓存。")])]),a._v(" "),t("li",[t("p",[a._v("quorum:当大多数节点写入成功后，就会返回成功给客户端。此选项仅在副本数大于 2 时才有意义，否则等效于 all。")])]),a._v(" "),t("li",[t("p",[a._v("all:仅在所有节点都写入成功后，返回成功。")])])]),a._v(" "),t("p",[a._v("我想强调一下，对时序数据库而言，读操作常会拉取大量数据，查询性能是挑战，是必须要 考虑优化的，因此，在 InfluxDB 企业版中，不支持读一致性级别，只支持写一致性级别。 那么在业务临时需要实 现强一致性时，就可以通过设置写一致性级别为 all，来实现了。")])])}),[],!1,null,null,null);n.default=s.exports}}]);